<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Task 10</title>
  </head>
  <body>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script type="application/javascript">
      $(document).ready(function () {
        function addPostRow(data) {
          const id = data.id;
          const title = data.title;
          const author = data.author;
          const p = $("<p></p>");
          const span = $("<span></span>");
          span.text(
            "Post created with id " +
              id +
              ", title: " +
              title +
              ", author: " +
              author
          );
          p.append(span);
          $("body").append(p);
        }

        function listPosts() {
          $.get(
            "http://localhost:3001/posts",
            function (data, status) {
              if (status === "success") {
                data.forEach((post) => {
                  addPostRow(post);
                });
              } else {
                alert("Server Error");
              }
            },
            "json"
          );
        }
        listPosts();
      });
    </script>
  </body>
</html>
